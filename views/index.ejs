<!DOCTYPE html>
<html>
<head>
  <title>CRUD Pessoas</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/public/style.css">
</head>
<body>
  <div class="h1">
    <h1>Cadastro de Pessoas - CRUD</h1>
  </div>

  <div class="form">
    <form action="/save" method="POST">
      <% if (editing) { %>
        <input type="hidden" name="id" value="<%= editing.id %>">
      <% } %>
      
      <div>
        <label>Nome:
          <input type="text" name="nome" 
                 value="<%= editing ? editing.nome : '' %>" required>
        </label>
      </div>
      
      <div>
        <label>Idade:
          <input type="number" name="idade" 
                 value="<%= editing ? editing.idade : '' %>" required>
        </label>
      </div>
      
      <div>
        <label>Peso (kg):
          <input type="number" step="0.01" name="peso"
                 value="<%= editing ? editing.peso : '' %>" required>
        </label>
      </div>
      
      <button type="submit">
        <%= editing ? 'Atualizar' : 'Salvar' %>
      </button>
      
      <% if (editing) { %>
        <a href="/">Cancelar</a>
      <% } %>
    </form>
  </div>

  <div class="registros">
    <h2>Registros</h2>
    <% if (pessoas && pessoas.length > 0) { %>
      <% pessoas.forEach(p => { %>
        <div class="registro">
          <strong><%= p.nome %></strong> 
          <%= p.idade %> anos - 
          <%= p.peso %> kg
          <div class="acoes">
            <a href="/edit/<%= p.id %>">Editar</a>
            <a href="/delete/<%= p.id %>">Excluir</a>
          </div>
        </div>
      <% }); %>
    <% } else { %>
      <p>Nenhuma pessoa cadastrada ainda.</p>
    <% } %>
  </div>
</body>
</html>